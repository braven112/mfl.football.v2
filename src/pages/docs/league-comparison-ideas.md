# League Comparison Page Ideas

## Priority Features (Phase 1)

### 1. Roster Strength Graphs (by Position & Total)
Visual comparison of each team's:
- **Position Breakdown**: QB / RB / WR / TE / FLEX scoring share
- **Bench Strength**: Performance distribution across starting vs bench players
- **Contract Value vs Performance**: Salary invested per position vs points produced
- **Chart Ideas**:
  - Stacked bar charts: Points contributed by position per team
  - Radar charts: Position strength profiles (QB, RB, WR, TE, FLEX as axes)
  - Waterfall charts: Points added over replacement (starter vs positional baseline)
  - Horizontal bar charts: Bench strength ranking by team

### 2. League Positional Ranking Heatmap
Visual grid comparison:
- **Rows**: Teams (16 franchises)
- **Columns**: Positions (QB, RB, WR, TE, FLEX, DEF)
- **Cells**: Rank among league (1-16) for that position
- **Coloration**: Heatmap gradient where red = weak ranking, green = strong ranking
- **Benefits**:
  - Immediately identifies positional strengths/weaknesses across league
  - Spot undervalued teams or positions at a glance
  - Find trading partners with depth at needed positions

### 3. Contract Health & Cap Efficiency
Health scorecard for team cap situation:
- **Total Salary**: Current roster investment
- **% Salary on IR**: Injured player cap hits (wasted salary)
- **% Salary on Underperforming Assets**: Players underperforming salary expectations
- **Value from Extensions**: Show contracts extended vs baseline market value gains/losses
- **One-Glance Health Badge**:
  - ðŸ”µ **Healthy Cap** - Efficient spending, low dead money, productive roster
  - ðŸŸ  **Mediocre** - Average efficiency, some dead money, mixed production
  - ðŸ”´ **Cap Disaster** - High dead money, underperformers, limited flexibility

### 4. Points Breakdown Comparison
Detailed scoring analysis for selected teams:
- **Total Points**: Season accumulation per team
- **Average Weekly**: Consistency metric (total points / weeks)
- **Standard Deviation**: Score volatility (high SD = boom/bust, low SD = consistent)
- **Points Against**: Defense strength indicator
- **Luck Score**: Expected W/L vs Actual W/L (luck adjustment)
  - Shows which teams overperformed expectations and which underperformed
  - Great for identifying regression risks vs sustainable performance
- **Format**: Strong table for weekly power rankings and roster quality assessment

### 5. Future Draft Capital Comparison
Multi-year draft asset evaluation:
- **Table Format**:
  - Columns: Team, 2025 Picks, 2026 Picks, 2027 Picks
  - Rows: Each team with pick listings
- **Value Scoring**:
  - Jimmy Johnson value chart integration
  - Modern pick value model (account for league dynamics)
  - Total asset value score per team
- **Pick Trade History** (bonus):
  - Show where picks came from (trades, compensation)
  - Visualize which teams have acquired/traded away future capital
- **Benefits**:
  - Identify teams with strong future flexibility
  - Spot teams committed to current roster (few picks)
  - Forecast emerging competitors

---

## Additional League Comparison Ideas

### 6. Salary Cap Efficiency Scorecard
Team-by-team efficiency metrics:
- **Cap Usage**: Current spend vs $45M cap with visual progress bars
- **Points per Dollar**: Total team points / total salary invested
- **Cost per Win**: Salary spent / estimated wins (if using points for win calculations)
- **Dead Money %**: Dead money commitments as % of cap
- **Remaining Cap**: How much flexibility each team has
- **Future Projections**: 2026 cap commitments with visual forecast

### 7. Age Distribution & Experience Analysis
Demographic comparison across franchises:
- **Team Age Profiles**: Average age by team with distribution overlay
- **Veterancy Index**: Years of NFL experience by team
- **Youth Movement**: Teams investing in young players vs veterans
- **Age by Position**: Which teams are young/old at each position
- **Visualization**: Box plots, age histograms, or grouped bars by position

### 8. Contract Year Distribution
Understanding roster turnover patterns:
- **Contract Year Breakdown**: % of team in Year 1, 2, 3, 4+ of contracts
- **Stacked Bar Chart**: Show contract year distribution for each team
- **Free Agents Coming**: Players entering final year (at-risk contracts)
- **Stability Index**: Teams with more multi-year commitments vs short-term deals
- **Cliff Analysis**: Teams facing cap cliffs in coming years

### 9. Dead Money Comparison
Visualizing sunk costs across league:
- **Dead Money by Team**: Current year dead money ranking
- **Ongoing Dead Money**: Multi-year dead money commitments
- **Dead Money Source**: Breakdown by drop reason or player
- **Dead Money Impact**: Dead money as % of that team's cap
- **Opportunity Cost**: How much active roster could that money buy?

### 10. NFL Team Concentration
Which NFL teams dominate your league:
- **NFL Team Distribution**: Which NFL teams have most players in league
- **Position-Specific Concentration**: E.g., "KC is 40% of QB production"
- **Scatter Plot**: NFL team vs # of league players
- **Risk Analysis**: Teams overexposed to single NFL team's injuries/bye week
- **Stacking Opportunities**: Identify which NFL teams are underexposed

### 11. Player Efficiency Rankings
Performance relative to investment:
- **Points per Million**: Each team's PPM average across roster
- **Best Value Players**: Outlier high performers on low salaries
- **Overpaid Positions**: Positions paying above-market for results
- **VORP-Style Metric**: Points above positional replacement per salary dollar
- **Bench vs Starter Efficiency**: Are teams getting value from depth?

### 12. Bye Week Distribution
Lineup management and risk assessment:
- **Bye Week Balance**: Distribution of bye weeks across teams
- **Week-by-Week Roster Quality**: How many teams are impacted each bye week
- **Bye Week Vulnerability**: Teams with multiple starters in same bye week
- **Depth by Bye Week**: Can teams field competitive lineups during byes?

### 13. Roster Composition Analysis
Understanding positional philosophy:
- **Roster Makeup**: How many QB/RB/WR/TE/FLEX per team
- **Early Season vs Bench**: Starter salaries vs bench salaries by team
- **Position Investment Strategy**: Does team spend heavily at certain positions?
- **Stack Detection**: Who has multiple players from same NFL teams

### 14. Fantasy Points Breakdown
Detailed scoring analysis:
- **Scoring Distribution**: Where do points come from (passing, rushing, receiving)?
- **Boom/Bust Analysis**: Teams with high variance vs consistent performers
- **Weekly Consistency**: Which teams score most predictably?
- **Peak Players**: Teams with standout stars vs balanced contributors

### 15. Contract Structure Deep Dive
Advanced contract analysis:
- **Tag Usage**: Which teams used franchise/transition tags
- **Extension Trends**: Teams actively extending vs letting walks
- **Average Contract Length**: Short-term deals vs long-term commitments
- **Salary Growth Path**: Teams with backloaded vs front-loaded deals

### 16. Positional Depth Rankings
Which teams have best positional depth:
- **Starter Quality**: Top player at each position per team
- **Backup Quality**: How deep does the talent go?
- **2nd/3rd String Value**: Can teams field competitive lineups with injuries?
- **Positional Flexibility**: FLEX-eligible players per team

### 17. Team Comparison Matrix
Interactive sortable table:
- **Rows**: Teams
- **Columns**: Metrics (total salary, total points, avg age, cap remaining, dead money, etc.)
- **Sortable**: Click to sort by any metric
- **Filterable**: Filter by position strength, cap situation, etc.
- **Color Coding**: Performance tiers (Top 5, Middle, Bottom 5) for quick scanning

### 18. League-Wide Summary Dashboard
Bird's-eye view metrics:
- **Average Team Stats**: League median salary, points, age, cap usage
- **Distribution Stats**: Standard deviation and percentiles
- **Outliers**: Teams at extremes (highest paid, most points, oldest/youngest, etc.)
- **Ranking Tiers**: Top 5, Middle, Bottom 5 teams across key metrics

---

## Visualization Preferences by Metric

| Metric | Chart Type | Why |
|--------|-----------|-----|
| Positional Points | Stacked Bar | Shows composition and totals |
| Position Strength | Radar/Spider | 5+ dimensions (QB, RB, WR, TE, FLEX) on one chart |
| Positional Ranking | Heatmap | 16 teams Ã— 6 positions grid |
| Cap Usage | Progress Bar / Donut | Single metric, part-to-whole |
| Age Distribution | Box Plot / Histogram | Shows spread and outliers |
| Contract Years | Stacked Bar | Composition over categories |
| Dead Money | Bar Chart | Single ranking comparison |
| NFL Concentration | Scatter Plot | Relationship between 2 variables |
| Bye Week Risk | Calendar / Grid | Temporal pattern recognition |
| Team Comparison | Table | Multiple metrics, sortable |

---

## Data Aggregation Approach

All metrics will be computed server-side during page render:

1. **Load Data**:
   - Player roster from MFL feeds (rosters.json)
   - Salary & contract data from cache
   - NFL team assignments from player data
   - Birth dates for age calculations

2. **Aggregate by Franchise**:
   - Group players by franchiseId
   - Calculate position totals (QB, RB, WR, TE, FLEX)
   - Sum salaries, points, contract years
   - Count players by attributes

3. **Rank Metrics**:
   - Rank each team 1-16 for each position
   - Rank salary efficiency
   - Rank age, experience, etc.

4. **Pass to Components**:
   - Supply aggregated data to chart components
   - Reuse existing chart utilities (DonutChart, BarChart, AgeDistributionChart)
   - Create new components as needed (HeatmapChart, RadarChart, etc.)

---

## Implementation Priority

**Phase 1** (MVP):
- Roster Strength Graphs (stacked bars by position)
- League Positional Ranking Heatmap
- Contract Health & Cap Efficiency (with health badges)
- Points Breakdown Comparison (with luck score)
- Future Draft Capital Comparison

**Phase 2** (Enhancement):
- Salary Cap Efficiency Scorecard
- Age Distribution Analysis
- Contract Year Distribution

**Phase 3** (Polish):
- Dead Money Comparison
- NFL Team Concentration
- Player Efficiency Rankings
- Bye Week Distribution

**Phase 4** (Advanced):
- Positional Depth Rankings
- Contract Structure Analysis
- Interactive Comparison Matrix
- League-Wide Dashboard

---

## File Structure

```
src/pages/league-comparison.astro (main page)
src/components/theleague/
  â”œâ”€â”€ LeagueRosterStrengthChart.astro (stacked bars)
  â”œâ”€â”€ PositionalRankingHeatmap.astro (heatmap grid)
  â”œâ”€â”€ LeagueCapEfficiency.astro
  â”œâ”€â”€ TeamAgeDistribution.astro
  â””â”€â”€ ContractYearDistribution.astro
src/utils/
  â””â”€â”€ league-comparison-utils.ts (aggregation functions)
```
