---
/**
 * PlayerCell - Reusable player display component
 * Shows player avatar, name, position, and NFL team logo
 */

import { DEFAULT_HEADSHOT_URL } from '../../constants/roster-constants';

export interface Props {
  /** Player name */
  name: string;
  /** Player headshot URL */
  headshot?: string;
  /** Player position (QB, RB, WR, etc.) */
  position?: string;
  /** NFL team code (SF, KC, etc.) */
  nflTeam?: string;
  /** NFL team logo URL */
  nflLogo?: string;
  /** Additional CSS classes */
  class?: string;
}

const {
  name,
  headshot,
  position,
  nflTeam,
  nflLogo,
  class: className,
} = Astro.props;

// Don't show NFL logo for DEF position
const showNflLogo = position?.toUpperCase() !== 'DEF' && nflLogo;
---

<div class:list={['player-cell', className]}>
  <div class="player-cell__avatar">
    <img
      src={headshot ?? DEFAULT_HEADSHOT_URL}
      alt={`${name} headshot`}
      loading="lazy"
      decoding="async"
      onerror={`this.onerror=null;this.src='${DEFAULT_HEADSHOT_URL}';`}
    />
  </div>
  <div class="player-cell__info">
    <strong class="player-cell__name">{name}</strong>
    {(showNflLogo || position) && (
      <div class="player-meta">
        {showNflLogo && (
          <img
            src={nflLogo}
            alt={`${nflTeam ?? 'FA'} logo`}
            class="player-meta__logo"
            loading="lazy"
            decoding="async"
          />
        )}
        {position && <span class="player-meta__pos">{position}</span>}
      </div>
    )}
  </div>
</div>

<style>
  .player-cell {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .player-cell__avatar {
    flex-shrink: 0;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    background: var(--avatar-bg-color, #f3f4f6);
  }

  .player-cell__avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .player-cell__info {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    min-width: 0;
  }

  .player-cell__name {
    font-weight: 600;
    color: #111;
    font-size: 0.9375rem;
    line-height: 1.3;
  }

  .player-meta {
    display: flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.8125rem;
    color: var(--text-secondary-color, #64748b);
  }

  .player-meta__logo {
    width: 16px;
    height: 16px;
    object-fit: contain;
    flex-shrink: 0;
  }

  .player-meta__pos {
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.025em;
  }

  @media (max-width: 768px) {
    .player-cell {
      gap: 0.625rem;
    }

    .player-cell__avatar {
      width: 36px;
      height: 36px;
    }

    .player-cell__name {
      font-size: 0.875rem;
    }

    .player-meta {
      font-size: 0.75rem;
      gap: 0.3125rem;
    }

    .player-meta__logo {
      width: 14px;
      height: 14px;
    }
  }
</style>
